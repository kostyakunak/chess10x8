# –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é Realtime —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

## –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ

1. ‚úÖ –°–æ–∑–¥–∞–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è SQL –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Realtime
2. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–ø–∏—Å–∫–∞ –≤ –∫–æ–¥–µ (—É–±—Ä–∞–Ω loadGameState –∏–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π)
3. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω Broadcast –∫–∞–Ω–∞–ª –¥–ª—è –∂–∏–≤—ã—Ö —Å–æ–±—ã—Ç–∏–π

## –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –≤—Ä—É—á–Ω—É—é

### –®–∞–≥ 1: –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –≤ Supabase

1. –û—Ç–∫—Ä–æ–π—Ç–µ [Supabase Dashboard](https://supabase.com/dashboard)
2. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à –ø—Ä–æ–µ–∫—Ç
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **SQL Editor**
4. –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `supabase/migrations/20250128120000_fix_realtime.sql`
5. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤–µ—Å—å SQL –∫–æ–¥
6. –í—Å—Ç–∞–≤—å—Ç–µ –≤ SQL Editor –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ (Run)

–ú–∏–≥—Ä–∞—Ü–∏—è:
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç `REPLICA IDENTITY FULL` –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π UPDATE
- –î–æ–±–∞–≤–∏—Ç —Ç–∞–±–ª–∏—Ü—É –≤ Realtime –ø—É–±–ª–∏–∫–∞—Ü–∏—é
- –°–æ–∑–¥–∞—Å—Ç `updated_at` —Ç—Ä–∏–≥–≥–µ—Ä
- –ù–∞—Å—Ç—Ä–æ–∏—Ç –ø—Ä–∞–≤–∞ –¥–ª—è anon

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Realtime –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

1. –í Supabase Dashboard: **Table Editor** ‚Üí `game_rooms`
2. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∏–∫–æ–Ω–∫—É **‚ö° Realtime** (–∏–ª–∏ Settings ‚Üí Realtime)
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Realtime –≤–∫–ª—é—á–µ–Ω:
   - ‚òëÔ∏è Enable Realtime
   - ‚òëÔ∏è Send INSERT events
   - ‚òëÔ∏è Send UPDATE events
   - ‚òëÔ∏è Send DELETE events

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É

1. –û—Ç–∫—Ä–æ–π—Ç–µ https://chess10x8.netlify.app/
2. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
3. –°–æ–∑–¥–∞–π—Ç–µ –∫–æ–º–Ω–∞—Ç—É
4. –û—Ç–∫—Ä–æ–π—Ç–µ –≤—Ç–æ—Ä—É—é –≤–∫–ª–∞–¥–∫—É —Å —Ç–æ–π –∂–µ –∫–æ–º–Ω–∞—Ç–æ–π
5. –î–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –ª–æ–≥–∏:
   - `üîî Subscription status: SUBSCRIBED`
   - `üîî postgres_changes: {...}` (–∫–æ–≥–¥–∞ –≤—Ç–æ—Ä–æ–π –∏–≥—Ä–æ–∫ –ø–æ–¥–∫–ª—é—á–∏–ª—Å—è)

## –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å –≤ –∫–æ–¥–µ

### –ë—ã–ª–æ:
```typescript
useEffect(() => {
  // ...
  loadGameState(currentRoomId);
}, [currentRoomId, loadGameState]); // ‚ùå loadGameState —Å–æ–∑–¥–∞–≤–∞–ª –ª–∏—à–Ω–∏–µ –ø–µ—Ä–µ–ø–æ–¥–ø–∏—Å–∫–∏
```

### –°—Ç–∞–ª–æ:
```typescript
useEffect(() => {
  // ...
}, [currentRoomId]); // ‚úÖ –û–¥–∏–Ω –∫–∞–Ω–∞–ª –Ω–∞ roomId
```

**–ü–ª—é—Å –¥–æ–±–∞–≤–∏–ª–∏:**
- Broadcast –∫–∞–Ω–∞–ª –¥–ª—è –∂–∏–≤—ã—Ö —Å–æ–±—ã—Ç–∏–π (—Ö–æ–¥—ã)
- Presence –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø–æ–¥–∫–ª—é—á—ë–Ω–Ω—ã—Ö –∏–≥—Ä–æ–∫–æ–≤
- Polling —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ Realtime –Ω–µ SUBSCRIBED

## –î–∞–ª—å–Ω–µ–π—à–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

1. **–£–±—Ä–∞—Ç—å polling –ø–æ–ª–Ω–æ—Å—Ç—å—é** –ø–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã Realtime
2. **–î–æ–±–∞–≤–∏—Ç—å Broadcast –¥–ª—è —Ö–æ–¥–æ–≤** –≤–º–µ—Å—Ç–æ –∑–∞–ø–∏—Å–∏ –≤ –ë–î –Ω–∞ –∫–∞–∂–¥—ã–π —Ö–æ–¥
3. **UI –æ–≤–µ—Ä–ª–µ–π** –¥–ª—è "–û–∂–∏–¥–∞–Ω–∏–µ –≤—Ç–æ—Ä–æ–≥–æ –∏–≥—Ä–æ–∫–∞"
4. **–¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –¥–æ—Å–∫—É** –∏ —É–ª—É—á—à–∏—Ç—å –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
- [ ] –í—Ç–æ—Ä–∞—è –≤–∫–ª–∞–¥–∫–∞ –≤–∏–¥–∏—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –±–µ–∑ –∑–∞–¥–µ—Ä–∂–∫–∏ (–±–µ–∑ polling)
- [ ] `gameStarted` –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —É –æ–±–æ–∏—Ö –∏–≥—Ä–æ–∫–æ–≤
- [ ] `playerColor` –Ω–µ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –≤ null
- [ ] –ö–æ–Ω—Å–æ–ª—å –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç `üîî postgres_changes`

–ï—Å–ª–∏ Realtime –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é –≤—ã–ø–æ–ª–Ω–µ–Ω–∞
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Realtime –≤–∫–ª—é—á–µ–Ω –≤ Dashboard
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `subscription status` –≤ –∫–æ–Ω—Å–æ–ª–∏
- –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Supabase –ø—Ä–æ–µ–∫—Ç
